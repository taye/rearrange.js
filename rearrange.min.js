(function(h){function O(a){var b,d,c;b=z(a,"page");var e=W(),f=b.x-e.x,e=b.y-e.y,i=g.options;b=g._element instanceof P?g._element.getBoundingClientRect():g._element.getClientRects()[0];t.resize&&i.resizeable&&(d=f>b.right-X,c=e>b.bottom-X);a=t.gesture&&a.touches&&2<=a.touches.length&&!p&&!q?"gesture":(H=(d?"x":"")+(c?"y":""))?"resize"+H:t.drag&&i.draggable?"drag":null;return a}function z(a,b){var d,c,b=b||"page";a.touches?(d=a.touches.length?a.touches[0]:a.changedTouches[0],c=d[b+"X"],d=d[b+"Y"]):
(c=a[b+"X"],d=a[b+"Y"]);ha&&(c-=h.scrollX,d-=h.scrollY);return{x:c,y:d}}function W(){return{x:h.scrollX||u.documentElement.scrollLeft,y:h.scrollY||u.documentElement.scrollTop}}function Y(a){for(var b=a.touches,d=0,c=0,e=0,f=0,a=0;a<b.length;a++)d+=b[a].pageX/b.length,c+=b[a].pageY/b.length,e+=b[a].clientX/b.length,f+=b[a].clientY/b.length;return{pageX:d,pageY:c,clientX:e,clientY:f}}function K(a){for(var b=0,d=a.length;b<d;b++){var c=a[b],e=ha?{x:0,y:0}:W(),f=c._element instanceof P?c._element.getBoundingClientRect():
c._element.getClientRects()[0];c.dropRect={left:f.left+e.x,right:f.right+e.x,top:f.top+e.y,bottom:f.bottom+e.y,width:f.width,height:f.height}}}function Z(a){if(a.length){var b,d=a[0],c,e=[],f=[],g;for(g=1;g<a.length;g++){b=a[g];if(!e.length)for(c=d._element;c.parentNode!==u;)e.unshift(c),c=c.parentNode;if(d._element instanceof sa&&b._element instanceof P&&!(b._element instanceof ta)){if(b._element.ownerSVGElement.parentNode===d._element.parentNode)continue;c=b._element.ownerSVGElement}else c=b._element;
for(f=[];c.parentNode!==u;)f.unshift(c),c=c.parentNode;for(c=0;f[c]&&f[c]===e[c];)c++;c=[f[c-1],f[c],e[c]];for(f=c[0].lastChild;f;){if(f===c[1]){d=b;e=[];break}else if(f===c[2])break;f=f.previousSibling}}return d}}function l(a,b,d){var c,e,f=g.options;"gesture"===b?(c=Y(a),e={x:c.pageX,y:c.pageY},c={x:c.clientX,y:c.clientY}):(c=z(a,"client"),e=z(a,"page"));this.x0=L;this.y0=M;this.clientX0=la;this.clientY0=ma;this.pageX=e.x;this.pageY=e.y;this.clientX=c.x;this.clientY=c.y;this.ctrlKey=a.ctrlKey;this.altKey=
a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.button=a.button;this.target="drop"===b&&v._element||g._element;this.type=b+(d||"");"start"===d||"end"===d||"drop"===b?(this.dx=e.x-L,this.dy=e.y-M):(this.dx=e.x-D,this.dy=e.y-E);if("resize"===b)f.squareResize||a.shiftKey?("y"===H?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=H,"x"===H?this.dy=0:"y"===H&&(this.dx=0));else if("gesture"===b){this.touches=a.touches;b=a.touches[0].pageX;e=a.touches[0].pageY;"touchend"===a.type&&
1===a.touches.length?(b-=a.changedTouches[0].pageX,e-=a.changedTouches[0].pageY):(b-=a.touches[1].pageX,e-=a.touches[1].pageY);this.distance=Math.sqrt(b*b+e*e);if(a.touches.length){e=a.touches;f=a.touches[0].pageX;c=a.touches[0].pageY;for(var i=f,h=c,b=1;b<e.length;b++)f=f>a.touches[b].pageX?f:a.touches[b].pageX,c=f>a.touches[b].pageX?c:a.touches[b].pageY;b={left:f,top:c,width:i-f,height:h-c}}else b=void 0;this.box=b;b=a.touches[0].pageX;e=a.touches[0].pageY;"touchend"===a.type&&1===a.touches.length?
(b-=a.changedTouches[0].pageX,e-=a.changedTouches[0].pageY):(b-=a.touches[1].pageX,e-=a.touches[1].pageY);this.angle=180*-Math.atan(e/b)/Math.PI;"start"===d?(this.scale=1,this.rotation=this.ds=0):(this.scale=this.distance/w.startDistance,"end"===d?(this.rotation=this.angle-w.startAngle,this.ds=this.scale-1):(this.rotation=this.angle-w.prevAngle,this.ds=this.scale-w.prevScale))}else if("drop"===b||"drag"===b&&("enter"===d||"leave"===d))this.draggable=g._element}function n(){}function k(a){if("string"!==
typeof a)return null;var b=-1!==a.indexOf("resize")?"resize":a,d=g.options;if(("resize"===b&&d.resizeable||"drag"===a&&d.draggable||"gesture"===a&&d.gestureable)&&t[b]){if("resize"===a||"resizeyx"===a)a="resizexy";return a}return null}function F(a,b){if((r.useAttachEvent?a.currentTarget:this)instanceof h.Element){var d="",c;a.touches?(c=Y(a),d={x:c.pageX,y:c.pageY},c={x:c.clientX,y:c.clientY}):(d=z(a,"page"),c=z(a,"client"));if(a.touches&&2>a.touches.length&&!g||!G)g=s.get(r.useAttachEvent?a.currentTarget:
this);if(g&&!p&&!q&&!x){var e=g.options;L=D=d.x;M=E=d.y;la=c.x;ma=c.y;d=k(b||e.getAction(a));if(!d)return a;G=!0;$=!1;I&&(u.documentElement.style.cursor=g._element.style.cursor=Q[d].cursor);H="resizexy"===d?"xy":"resizex"===d?"x":"resizey"===d?"y":"";aa=d in Q?d:null;a.preventDefault()}}}function R(a){a.preventDefault();var b,d,c,e;if(p){if(b=new l(a,"drag","move"),m.length){var f,i=[];for(f=0;f<m.length;f++)m[f].dropCheck(a)&&i.push(m[f]);v=Z(i);v!==A&&(A&&(c=new l(a,"drag","leave"),b.dragLeave=
A._element,e=A,A=null),v&&(d=new l(a,"drag","enter"),b.dragEnter=v._element,A=v))}}else b=new l(a,"drag","start"),p=!0,J||K(m);g.fire(b);c&&e.fire(c);d&&v.fire(d);D=b.pageX;E=b.pageY}function ba(a){a.preventDefault();q?(a=new l(a,"resize","move"),g.fire(a)):(a=new l(a,"resize","start"),g.fire(a),q=!0);D=a.pageX;E=a.pageY}function na(a){2>a.touches.length||(a.preventDefault(),x?(a=new l(a,"gesture","move"),a.ds=a.scale-w.scale,g.fire(a)):(a=new l(a,"gesture","start"),a.ds=0,w.startDistance=a.distance,
w.startAngle=a.angle,w.scale=1,g.fire(a),x=!0),D=a.pageX,E=a.pageY,w.prevAngle=a.angle,w.prevDistance=a.distance,Infinity!==a.scale&&(null!==a.scale&&void 0!==a.scale&&!isNaN(a.scale))&&(w.scale=a.scale))}function oa(a){if(!G&&(!p&&!q&&!x)&&(g=s.get(a.target))){var b=g.options;(t.drag&&b.draggable||t.resize&&b.resizeable)&&b.checkOnHover?(a=k(b.getAction(a)),I&&(g._element.style.cursor=a?Q[a].cursor:"")):(p||q||x)&&a.preventDefault()}}function ca(a){var b;if(p){b=new l(a,"drag","end");var d;if(m.length){var c,
e=[];for(c=0;c<m.length;c++)m[c].dropCheck(a)&&e.push(m[c]);(v=Z(e))?(d=new l(a,"drop"),b.dropzone=v._element):A&&(c=new l(a,"drag","leave"),A.fire(c),b.dragLeave=A._element)}g.fire(b);d&&v.fire(d)}else if(q)b=new l(a,"resize","end"),g.fire(b);else if(x)b=new l(a,"gesture","end"),b.ds=b.scale,g.fire(b);else if("mouseup"===a.type&&g&&G&&!$){d={};for(b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);d.type="click";g.fire(d)}G=p=q=x=!1;$=!0;g&&(I&&(u.documentElement.style.cursor="",g._element.style.cursor=""),
j.stop(),g=v=A=null,a.preventDefault());aa=null;return a}function i(a){"string"===typeof a&&(a=u.getElementById(a));return s.get(a)||new ia(a)}function da(a){for(var b in da.prototype)a.hasOwnProperty(b)&&typeof a[b]===typeof da.prototype[b]&&(this[b]=a[b])}function ia(a,b){this._element=a;this._iEvents=this._iEvents||{};r.add(this,ea,oa);r.add(this,ja,F);s.push(this);this.set(b)}var u=h.document,B=h.console,P=h.SVGElement||n,ta=h.SVGSVGElement||n,sa=h.HTMLElement||h.Element,D=0,E=0,L=0,M=0,la=0,
ma=0,w={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},s=[],m=[],g=null,v=null,A=null,j={isEnabled:!0,margin:70,interval:20,i:null,distance:10,x:0,y:0,autoScroll:function(){h.scrollBy(j.x,j.y)},edgeMove:function(a){if(j.isEnabled&&(p||q)){var b=a.clientY<j.margin,d=a.clientY>h.innerHeight-j.margin,c=a.clientX<j.margin,e=g.options;j.x=j.distance*(a.clientX>h.innerWidth-j.margin?1:c?-1:0);j.y=j.distance*(d?1:b?-1:0);!j.isScrolling&&e.autoScroll&&j.start()}},
isScrolling:!1,start:function(){j.isScrolling=!0;h.clearInterval(j.i);j.i=h.setInterval(j.autoScroll,j.interval)},stop:function(){h.clearInterval(j.i);j.isScrolling=!1}},N="createTouch"in u,X=N?20:10,G=!1,$=!1,fa=!1,x=!1,p=!1,J=!1,q=!1,H="xy",Q={drag:{cursor:"move",moveListener:R},resizex:{cursor:"e-resize",moveListener:ba},resizey:{cursor:"s-resize",moveListener:ba},resizexy:{cursor:"se-resize",moveListener:ba},gesture:{cursor:"",moveListener:na}},t={drag:!0,resize:!0,gesture:!0},aa=null,I=!0,ja,
y,ea,ua="onmousewheel"in u?"mousewheel":"wheel",S="resizestart resizemove resizeend dragstart dragmove dragend dragenter dragleave drop gesturestart gesturemove gestureend click".split(" "),C=[],ha="Opera"==navigator.appName&&N&&navigator.userAgent.match("Presto"),va={_element:h,events:{}},ga={_element:u,events:{}},r,pa=function(a,b,d,c){var e,f=T[U.indexOf(a)];if(f&&f.events)if("all"===b)for(b in f.events)f.events.hasOwnProperty(b)&&pa(a,b,"all");else{if(f.events[b]){var g=f.events[b].length;if("all"===
d){for(e=0;e<g;e++)a[qa](ka+b,f.events[b][e],c||!1);f.events[b]=null;f.typeCount--}else for(e=0;e<g;e++)if(f.events[b][e]===d){a[qa](ka+b,f.events[b][e],c||!1);f.events[b].splice(e,1);break}f.events[b]&&0===f.events[b].length&&(f.events[b]=null,f.typeCount--)}f.typeCount||(T.splice(T.indexOf(f),1),U.splice(U.indexOf(a),1))}};y=h.Event;var V="attachEvent"in h&&!("addEventListener"in h),ra=!V?"addEventListener":"attachEvent",qa=!V?"removeEventListener":"detachEvent",ka=V?"on":"",U=[],T=[];"indexOf"in
Array.prototype||(Array.prototype.indexOf=function(a,b){var d=this.length>>>0,c=Number(b)||0,c=0>c?Math.ceil(c):Math.floor(c);for(0>c&&(c+=d);c<d;c++)if(c in this&&this[c]===a)return c;return-1});"stopPropagation"in y.prototype||(y.prototype.stopPropagation=function(){this.cancelBubble=!0},y.prototype.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.cancelBubble=!0});"preventDefault"in y.prototype||(y.prototype.preventDefault=function(){this.returnValue=!1});"hasOwnProperty"in
y.prototype||(y.prototype.hasOwnProperty=Object.prototype.hasOwnProperty);r={add:function(a,b,d,c){var e=a._element,a=T[U.indexOf(e)];a||(a={events:{},typeCount:0},U.push(e),T.push(a));b in a.events||(a.events[b]=[],a.typeCount++);-1===a.events[b].indexOf(d)&&(V?e[ra](ka+b,function(a){a.immediatePropagationStopped||(a.target=a.srcElement,a.currentTarget=e,a.type.match(/mouse|click/)&&(a.pageX=a.clientX+u.documentElement.scrollLeft,a.pageY=a.clientY+u.documentElement.scrollTop),d(a))},d,c||!1):e[ra](b,
d,c||!1),a.events[b].push(d))},remove:function(a,b,d,c){pa(a._element,b,d,c)},useAttachEvent:V};N?(ja="touchstart",y="touchend",ea="touchmove"):(ja="mousedown",y="mouseup",ea="mousemove");l.prototype={preventDefault:n,stopImmediatePropagation:function(){fa=!0},stopPropagation:n};s.indexOfElement=m.indexOfElement=function(a){var b;for(b=0;b<this.length;b++)if(this[b]._element===a)return b;return-1};s.get=m.get=function(a){a=this.indexOfElement(a);return s[a]};da.prototype={draggable:!1,dropzone:!1,
resizeable:!1,gestureable:!1,squareResize:!1,autoScroll:!0,getAction:O,checkOnHover:!0};ia.prototype={setOnEvents:function(a,b){var d=b.onstart||b.onStart,c=b.onmove||b.onMove,e=b.onend||b.onEnd,a="on"+a;"function"===typeof d&&(this[a+"start"]=d);"function"===typeof c&&(this[a+"move"]=c);"function"===typeof e&&(this[a+"end"]=e)},draggable:function(a){return"object"===typeof a?(this.options.draggable=!0,this.setOnEvents("drag",a),this):"boolean"===typeof a?(this.options.draggable=a,this):this.options.draggable},
dropzone:function(a){if("object"===typeof a)return a=a.ondrop||a.onDrop,"function"===typeof a&&(this.ondrop=a),this.options.dropzone=!0,m.push(this),J||K([this]),this;if("boolean"===typeof a){if(a)m.push(this),J||K([this]);else{var b=m.indexOf(this);-1!==b&&m.splice(b,1)}this.options.dropzone=a;return this}return this.options.dropzone},dropCheck:function(a){if(g!==this){var b;if(J){b=this._element instanceof P?this._element.getBoundingClientRect():this._element.getClientRects()[0];var d=ha?z(a,"page"):
z(a,"client"),a=d.x>b.left&&d.x<b.right;b=d.y>b.top&&d.y<b.bottom}else b=z(a,"page"),a=b.x>this.dropRect.left&&b.x<this.dropRect.right,b=b.y>this.dropRect.top&&b.y<this.dropRect.bottom;return a&&b}},dropChecker:function(a){return"function"===typeof a?(this.dropChecker=a,this):this.dropChecker},resizeable:function(a){return"object"===typeof a?(this.options.resizeable=!0,this.setOnEvents("resize",a),this):"boolean"===typeof a?(this.options.resizeable=a,this):this.options.resizeable},squareResize:function(a){return null!==
a&&void 0!==a?(this.options.squareResize=a,this):this.options.squareResize},gestureable:function(a){return"object"===typeof a?(this.options.gestureable=!0,this.setOnEvents("gesture",a),this):null!==a&&void 0!==a?(this.options.gestureable=a,this):this.options.gestureable},autoScroll:function(a){return null!==a&&void 0!==a?(this.options.autoScroll=a,this):this.options.autoScroll},actionChecker:function(a){return"function"===typeof a?(this.options.getAction=a,this):this.options.getAction},checkOnHover:function(a){return null!==
a&&void 0!==a?(this.options.checkOnHover=a,this):this.options.checkOnHover},element:function(){return this._element},fire:function(a){if(!a||!a.type||-1===S.indexOf(a.type))return this;for(var b,d=0,c=0,e,f="on"+a.type;3>d;)try{switch(d){case 0:if("function"===typeof this[f])this[f](a);break;case 1:if(a.type in this._iEvents){b=this._iEvents[a.type];for(e=b.length;c<e&&!fa;c++)b[c](a);break}break;case 2:if(a.type in C&&(b=C[a.type])){b=C[a.type];for(e=b.length;c<e&&!fa;c++)b[c](a)}}c=0;d++}catch(g){B.error("Error thrown from "+
a.type+" listener"),B.error(g),c++,0===d&&d++}fa=!1;return this},bind:function(a,b,d){-1!==S.indexOf(a)?a in this._iEvents?-1===this._iEvents[a].indexOf(b)&&this._iEvents[a].push(b):this._iEvents[a]=[b]:("wheel"===a&&(a=ua),r.add(this,a,b,d));return this},unbind:function(a,b,d){-1!==S.indexOf(a)?(b=this._iEvents[a].indexOf(b),-1!==b&&this._iEvents[a].splice(b,1)):r.remove(this._element,b,d);return this},set:function(a){if(!a||"object"!==typeof a)a={};this.options=new da(a);this.draggable(this.options.draggable);
this.dropzone(this.options.dropzone);this.resizeable(this.options.resizeable);this.gestureable(this.options.gestureable);return this},unset:function(){r.remove(this,"all");I&&(this._element.style.cursor="");this.draggable(!1);this.dropzone(!1);this.resizeable(!1);this.gestureable(!1);s.splice(s.indexOf(this),1);return i}};i.isSet=function(a){return-1!==s.indexOfElement(a)};i.bind=function(a,b){-1!==S.indexOf(a)&&(C[a]?-1===C[a].indexOf(b)&&C[a].push(b):C[a]=[b]);return i};i.unbind=function(a,b){var d=
C[a].indexOf(b);-1!==d&&C[a].splice(d,1);return i};i.simulate=function(a,b,d){var c={},e;"resize"===a&&(a="resizexy");if(!(a in Q))return i;if(d)for(e in d)d.hasOwnProperty(e)&&(c[e]=d[e]);else d=g._element instanceof P?b.getBoundingClientRect():d=b.getClientRects()[0],"drag"===a?(c.pageX=d.left+d.width/2,c.pageY=d.top+d.height/2):(c.pageX=d.right,c.pageY=d.bottom);c.target=c.currentTarget=b;c.preventDefault=c.stopPropagation=function(){};F(c,a);return i};i.enableDragging=function(a){return null!==
a&&void 0!==a?(t.drag=a,i):t.drag};i.enableResizing=function(a){return null!==a&&void 0!==a?(t.resize=a,i):t.resize};i.enableGesturing=function(a){return null!==a&&void 0!==a?(t.gesture=a,i):t.gesture};i.eventTypes=S;i.debug=function(){return{target:g,dragging:p,resizing:q,gesturing:x,prevX:D,prevY:E,x0:L,y0:M,Interactable:ia,interactables:s,dropzones:m,mouseIsDown:G,supportsTouch:N,defaultActionChecker:O,dragMove:R,resizeMove:ba,gestureMove:na,mouseUp:ca,mouseDown:F,mouseHover:oa,events:r,log:function(){B.log("target         :  "+
g);B.log("prevX, prevY   :  "+D,E);B.log("x0, y0         :  "+L,M);B.log("supportsTouch  :  "+N);B.log("mouseIsDown    :  "+G);B.log("dragging       :  "+p);B.log("resizing       :  "+q);B.log("gesturing      :  "+x)}}};i.margin=function(a){return"number"===typeof a?(X=a,i):X};i.styleCursor=function(a){if(null!==a&&void 0!==a){I=a;if(!I)for(a=0;a<s.length;a++)s[a]._element.style.cursor="";return i}return I};i.enableAutoScroll=function(a){return null!==a&&void 0!==a?(j.isEnabled=a,i):j.isEnabled};
i.supportsTouch=function(){return N};i.currentAction=function(){return p&&"drag"||q&&"resize"||x&&"gesture"||null};i.dynamicDrop=function(a){return"boolean"===typeof a?(p&&(J!==a&&!a)&&K(m),J=a,i):J};r.add(ga,y,ca);r.add(ga,ea,function(a){G&&(L===D&&M===E&&($=!0),aa&&g&&Q[aa].moveListener(a));(p||q)&&j.edgeMove(a)});r.add(ga,"touchcancel",ca);r.add(va,"blur",ca);r.add(ga,"selectstart",function(a){(p||q||x)&&a.preventDefault()});h.interact=i})(window);
(function(h){function O(h){h!==k&&(h!==n&&h!==n.documentElement)&&(k&&(k.classList.remove("rearrange-target"),k.classList.remove("rearranging")),k=h,h.classList.add("rearrange-target"))}function z(k){h.currentAction()||O(k.target)}function W(h){h.altKey&&(0<(h.detail||h.deltaY||h.wheelDeltaY)&&O(k.parentNode),h.preventDefault())}function Y(){k.rearranged||(k.rearranged={x:0,y:0});k.classList.add("rearranging")}function K(h){k.rearranged.x+=h.dx;k.rearranged.y+=h.dy;k.style[R]="translate("+k.rearranged.x+
"px, "+k.rearranged.y+"px)"}function Z(){k.classList.remove("rearranging")}function l(){R="transform"in n.body.style?"transform":"webkitTransform"in n.body.style?"webkitTransform":"MozTransform"in n.body.style?"MozTransform":"oTransform"in n.body.style?"oTransform":"msTransform";h(n.documentElement).draggable(!0).actionChecker(function(){return k?"drag":null}).checkOnHover(!1).bind("mouseover",z).bind("wheel",W).bind("dragstart",Y).bind("dragmove",K).bind("dragend",Z);F=n.createElement("style");F.type=
"text/css";F.innerHTML=".rearrange-target{border:yellow solid 3px !important;} .rearranging{border-style:dashed !important;}";n.body.appendChild(F)}var n=window.document,k=null,F,R;"complete"!==n.readyState?n.addEventListener("DOMContentLoaded",l):l()})(window.interact);
